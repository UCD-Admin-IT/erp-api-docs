# 3.2.3 Action Requests

### Common Action Request Data Types

#### Input Types

##### `ActionRequestHeaderInput`

> This is the default field set for all action requests.  It part of all action requests as the `header` attribute.

| Property Name           | Type                     | Notes                                                                                                                                                               |
| ----------------------- | ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| callbackURL             | URL                      | URL for which to send back results when this journal is processed.                                                                                                  |
| consumerTrackingId      | NonEmptyTrimmedString80  | For ID internal to consumer system to allow tracking. Will not be transmitted to Oracle.                                                                            |
| consumerReferenceId     | NonEmptyTrimmedString80! | Identifier provided by the consumer which usually references the source record within their system.  Does not need to be unique. Will not be transmitted to Oracle. |
| consumerNotes           | NonEmptyTrimmedString240 | Consumer text which will be stored in the API system. Will not be transmitted to Oracle.                                                                            |
| boundaryApplicationName | NonEmptyTrimmedString80! | Identifier for the boundary application originating the request.                                                                                                    |


#### Support Types

##### `GlSegmentInput`

| Property Name | Type               | Notes |
| ------------- | ------------------ | ----- |
| entity        | ErpEntityCode!     |       |
| fund          | ErpFundCode!       |       |
| department    | ErpDepartmentCode! |       |
| account       | ErpAccountCode!    |       |
| purpose       | ErpPurposeCode     |       |
| project       | ErpProjectCode     |       |
| program       | ErpProgramCode     |       |
| activity      | ErpActivityCode    |       |

<!-- | interEntity   | ErpInterEntityCode |       | -->
<!-- | flex1   | ErpFlex1Code |       | -->
<!-- | flex2   | ErpFlex2Code |       | -->

##### `PpmSegmentInput`

| Property Name   | Type                    | Notes |
| --------------- | ----------------------- | ----- |
| project         | PpmProjectNumber!       |       |
| organization    | PpmOrganizationCode!    |       |
| expenditureType | PpmExpenditureTypeCode! |       |
| task            | PpmTaskName!            |       |
| award           | PpmAwardNumber          |       |
| fundingSource   | PpmFundingSourceNumber  |       |

#### Output Types

##### `XxxxxxxxRequestStatusOutput`

> Each action request operation will have a matching Output type named like the above.  Each of these will have the properties shown below and possibly additional values available for completed requests if it is possible to extract generated values from the ERP.
>
> An example of one of these additional values would be for submitted journals, that we would be able to return the ERP-generated journal ID created during data import.

| Property Name     | Type                 | Notes                                                                                                          |
| ----------------- | -------------------- | -------------------------------------------------------------------------------------------------------------- |
| requestStatus     | ActionRequestStatus! | Overall status of the action request                                                                           |
| validationResults | ValidationResponse   | Errors found when validatating the payload data.  These must be corrected before the request will be accepted. |

##### `ActionRequestStatus`

> Response provided when the consumer submits a request.  This will be the `requestStatus` property under any action request response.

| Property Name           | Type                     | Notes                                                                       |
| ----------------------- | ------------------------ | --------------------------------------------------------------------------- |
| requestId               | UUID                     | Unique Request ID generated by API server.                                  |
| consumerId              | NonEmptyTrimmedString80! | Identifier of the API consumer making the request.                          |
| consumerTrackingId      | NonEmptyTrimmedString80  | Tracking ID provided by the consumer                                        |
| consumerReferenceId     | NonEmptyTrimmedString80! | Reference ID provided by the consumer                                       |
| consumerNotes           | NonEmptyTrimmedString240 | Notes provided by consumer when they made the request.                      |
| boundaryApplicationName | NonEmptyTrimmedString80! | Identifier for the boundary application originating the request.            |
| operationName           | String!                  | Name of the operation called.                                               |
| requestDateTime         | DateTime!                | Server-recorded time the request was received.                              |
| requestStatus           | RequestStatus!           | Current Status of the request. (enum)                                       |
| lastStatusDateTime      | DateTime!                | Timestamp of the last time the status changed.                              |
| processedDateTime       | DateTime                 | Timestamp when the request finished processing.                             |
| errorMessages           | \[String!\]              | Array of error messages, if any.                                            |
| statusRequestPayload    | JSON                     | Full JSON of the GraphQL request needed to check the status of the request. |
| actionRequestPayload    | JSON                     | Full JSON of the original GraphQL action request.                           |

##### `ValidationResponse`

> Common data structure for reporting back issues found when validating data against ERP requirements.  This does not include GraphQL formatting or content problems, which are reported back in an `errors` object per the GraphQL specification.

| Property Name     | Type        | Notes                                                                                                                            |
| ----------------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------- |
| valid             | Boolean!    | Whether the overall validation succeeded or failed.                                                                              |
| errorMessages     | \[String!\] | Array of all errors found during validation.  The failed property is in the matching index in the `messageProperties` list.      |
| messageProperties | \[String!\] | Property names which failed validation.  May be blank if the validation applies to the entire payload or no particular property. |

##### `enum RequestStatus`

##### `RequestStatus`

> Status options within the [ActionRequestStatus]({{Types.ActionRequestStatus}}) that reflect the states a request can be in.

| Enum Value  | Description                                                                                                                                                           |
| ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `COMPLETE`  | If Callback URL Provided: Request has been processed, and the callback was successfully contacted.  Or, request has been processed, and no callback URL was provided. |
| `ERROR`     | There was an error processing the request after it was picked up.                                                                                                     |
| `INPROCESS` | Request has been picked up for processing                                                                                                                             |
| `PENDING`   | Request has been submitted to the server, but not validated or processed.                                                                                             |
| `PROCESSED` | Request has been processed, but the callback has not been completed.                                                                                                  |
| `REJECTED`  | There was a validation error in the request payload data.                                                                                                             |
| `STALE`     | If Callback URL Provided: Request has been processed, but repeated attempts to contact the callback have failed and no more will be tried.                            |



#### Scalars

> Scalar types defined to provide standard max-length, character type and pattern restrictions.  Result in immediate enforcement during graphQL parsing.

| Scalar Name                  | Description |
| ---------------------------- | ----------- |
| `Boolean`                    | The `Boolean` scalar type represents `true` or `false`. |
| `CityName`                   | Oracle City Name, 60-character limit |
| `CountryCode`                | Oracle Country Code.  ISO-3601-1 alpha-2 |
| `Currency`                   | A field whose value is a Currency: https://en.wikipedia.org/wiki/ISO_4217. |
| `Date`                       | A date string, such as 2007-12-03, compliant with the `full-date` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar. |
| `DateTime`                   | A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar. |
| `EmailAddress`               | A field whose value conforms to the standard internet email address format as specified in RFC822: https://www.w3.org/Protocols/rfc822/. |
| `ErpAccountCode`             | Oracle GL Account Segment Code<br/><br/>- All values are exactly 6 characters matching the regex pattern: `[0-9]{5}[0-9A-EX]`<br/>- Validated against the [`ErpAccount`]({{Types.ErpAccount}}) object. |
| `ErpAccountingPeriodName`    | Oracle Accounting Period Name<br/><br/>- Validated against the `periodName` of the [`GlAccountingPeriod`]({{Types.GlAccountingPeriod}}).<br/>   |
| `ErpActivityCode`            | Oracle GL Activity Segment Code<br/><br/>- All values are exactly 6 characters matching the regex pattern: `[0-9X]{5}[0-9AB]`<br/>- Validated against the [`ErpActivity`]({{Types.ErpActivity}}) object. |
| `ErpDepartmentCode`          | Oracle GL Financial Department Segment Code<br/><br/>- All values are exactly 7 characters matching the regex pattern: `[0-9P][0-9]{5}[0-9A-F]`<br/>- Validated against the [`ErpFinancialDepartment`]({{Types.ErpFinancialDepartment}}) object. |
| `ErpDepartmentTypeCode`      | ERP Financial Department Type Code |
| `ErpDescriptionField240`     | Up to 240-character description field limited to letters, numbers, hyphen, underscore, spaces, and periods. |
| `ErpEmailAddress`            | Oracle Email Address, 320 Character Limit |
| `ErpEntityCode`              | Oracle GL Entity Segment Code<br/><br/>Represents the 4-character entity code that identifies the major operational unit within the University of California responsible for each transaction.<br/><br/>- All values are exactly 4 characters matching the regex pattern: `[0-9]{3}[0-9AB]`<br/>- Validated against the [`ErpEntity`]({{Types.ErpEntity}}) object. |
| `ErpFlex1Code`               | Oracle GL Flex1 Segment Code - **UNUSED** |
| `ErpFlex2Code`               | Oracle GL Flex2 Segment Code - **UNUSED** |
| `ErpFundCode`                | Oracle GL Fund Segment Code<br/><br/>- All values are exactly 5 characters matching the regex pattern: `[0-9A-Z][0-9]{3}[0-9A-Z]`<br/>- Validated against the [`ErpFund`]({{Types.ErpFund}}) object. |
| `ErpNameField100`            | 100-character naming field limited to letters, numbers, hyphen, underscore, and spaces |
| `ErpPostalCode`              | Oracle Postal Code |
| `ErpProgramCode`             | Oracle GL Program Segment Code<br/><br/>- All values are exactly 3 characters matching the regex pattern: `[0-9A-Z]{3}`<br/>- Validated against the [`ErpProgram`]({{Types.ErpProgram}}) object. |
| `ErpProjectCode`             | Oracle GL Project Segment Code<br/><br/>- All values are exactly 10 characters matching the regex pattern: `[0-9A-Z]{10}`<br/>- Validated against the [`ErpProject`]({{Types.ErpProject}}) object. |
| `ErpPurposeCode`             | Oracle GL Purpose Segment Code<br/><br/>- All values are exactly 2 characters matching the regex pattern: `[0-9][0-9A-Z]`<br/>- Validated against the [`ErpPurpose`]({{Types.ErpPurpose}}) object. |
| `ErpUserId`                  | Oracle User ID: 32 character limit |
| `Float`                      | The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point). |
| `GlDescriptionField40`       | 40-character description field limited to letters, numbers, hyphen, underscore, and spaces |
| `GlJournalCategoryKey`       | General Ledger Journal Category Key<br/><br/>- Limit of 25 characters.<br/>- Validated against the `key` of the [`GlJournalCategory`]({{Types.GlJournalCategory}}).<br/> |
| `GlJournalSourceKey`         | General Ledger Journal Source Key or Name<br/><br/>- Limit of 25 characters.<br/>- Validated against the `key` of the [`GlJournalSource`]({{Types.GlJournalSource}}).<br/> |
| `GlReferenceField10`         | 10-character reference field limited to letters, numbers, hyphen, and underscore |
| `GlReferenceField25`         | 25-character reference field limited to letters, numbers, hyphen, and underscore |
| `GlSegmentString`            | Oracle GL Combined Segments Chartstring<br/><br/>Must be fully populated with all 11 segments, even if unused.  Fill unused segments with zeroes.<br/><br/>- Format Pattern: `0000-00000-0000000-000000-00-000-0000000000-000000-0000-000000-000000`<br/>- Format Regex:   `^[0-9]{3}[0-9AB]-[0-9A-Z][0-9]{3}[0-9A-Z]-[0-9P][0-9]{5}[0-9A-F]-[0-9]{5}[0-9A-EX]-[0-9][0-9A-Z]-[0-9A-Z]{3}-[0-9A-Z]{10}-[0-9X]{5}[0-9AB]-0000-000000-000000$`<br/> |
| `Int`                        | The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1. |
| `JWT`                        | A field whose value is a JSON Web Token (JWT): https://jwt.io/introduction. |
| `KfsAccountNumber`           | 7-character KFS Account Number, upper-case letters and digits only |
| `KfsChartCode`               | 1-character KFS Chart Code.  Must be one of 3, L, H, S, P, M, N |
| `KfsOrgCode`                 | 4-character KFS Org Code, upper-case letters and digits only |
| `LocalDate`                  | A local date string (i.e., with no associated timezone) in `YYYY-MM-DD` format, e.g. `2020-01-01`. |
| `Long`                       | The `BigInt` scalar type represents non-fractional signed whole numeric values. |
| `NonEmptyString`             | A string that cannot be passed as an empty value |
| `NonEmptyTrimmedString10`    | String limited to 10 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString100`   | String limited to 100 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString15`    | String limited to 15 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString150`   | String limited to 150 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString2`     | String limited to 2 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString20`    | Trimmed String limited to 20 characters. |
| `NonEmptyTrimmedString225`   | String limited to 225 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString240`   | String limited to 240 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString25`    | String limited to 25 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString250`   | String limited to 250 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString255`   | String limited to 255 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString30`    | Trimmed String limited to 30 characters. |
| `NonEmptyTrimmedString32`    | String limited to 32 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString320`   | String limited to 320 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString360`   | String limited to 360 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString40`    | String limited to 40 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString50`    | String limited to 50 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString60`    | String limited to 60 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonEmptyTrimmedString80`    | String limited to 80 characters.  Whitespace will be trimmed from both ends of the string when passing in both directions.  In the case that source data to be returned by the API exceeds this length, it will be truncated. |
| `NonNegativeFloat`           | Floats that will have a value of 0 or more. |
| `NonNegativeInt`             | Integers that will have a value of 0 or more. |
| `PositiveFloat`              | Floats that will have a value greater than 0. |
| `PositiveInt`                | Integers that will have a value greater than 0. |
| `PpmAwardNumber`             | Oracle PPM Award |
| `PpmExpenseOrganizationCode` | Oracle PPM Expense Organization<br/><br/>The PPM Expense organization will have the same values as the [`ErpFinancialDepartment`]({{Types.ErpFinancialDepartment}}).  The expected value by oracle is the code + " - " + name.  This API will accept the code alone by using the first 7 characters of the string and perfoming the needed lookup to obtain the value required by Oracle.<br/> |
| `PpmExpenseTypeCode`         | Oracle PPM Expense Type |
| `PpmFundingSourceNumber`     | Oracle PPM Funding Source |
| `PpmProjectNumber`           | Oracle Managed Project Number |
| `PpmTaskName`                | Oracle PPM Project Task |
| `ScmAddressLine`             | Oracle SCM Address Line, 240 Character Limit |
| `ScmName`                    | Oracle SCM Name |
| `String`                     | The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text. |
| `URL`                        | A field whose value conforms to the standard URL format as specified in RFC3986: https://www.ietf.org/rfc/rfc3986.txt. |
| `UUID`                       | A field whose value is a generic Universally Unique Identifier: https://en.wikipedia.org/wiki/Universally_unique_identifier. |



#### Enums

  > Enumeration types defined to provide values and meaning were a standard set of codes is needed for or provided by a property on the API.  When used with inputs, they will result in immediate enforcement during GraphQL parsing.

##### `ArAccountClass`

Used on AR Invoices to indicate the type of accounting on a distribution line.

| Enum Value | Description |
| ---------- | ----------- |
| `REC`      | Receivable |
| `REV`      | Revenue |

##### `ArDistributionAccountClass`

Account class for this accounting distribution. Valid values are:

* REV - Revenue
* FREIGHT - Freight
* TAX - Tax
* REC - Receivables
* CHARGES -  Late Charges
* UNBILL - Unbilled Receivables
* UNEARN -  Unearned Revenue

When the line type is LINE, the value for this column should be REV, UNBILL, UNEARN, or REC."

| Enum Value | Description |
| ---------- | ----------- |
| `REC`      | Receivable |
| `REV`      | Revenue |

##### `ArLineType`



| Enum Value | Description |
| ---------- | ----------- |
| `LINE`     |  |

##### `ArTransactionType`



| Enum Value | Description |
| ---------- | ----------- |
| `CHARGES`  | Other Charges Line |
| `FREIGHT`  | Shipping and Handling Charges Line |
| `LINE`     | Normal Receivables Line.  Excludes tax, freight, or misc charges. |
| `TAX`      | Charged Tax Line |

##### `ErpCoaHierarchyLevel`

Hierarchy Level Codes used in the financial chartstring structures.

| Enum Value | Description |
| ---------- | ----------- |
| `A`        | Top Level, Defined by UCOP |
| `B`        | Second Level, often defined by UCOP for segments with many values. |
| `C`        | Third Level, campus-specific, but may be UCOP defined. |
| `D`        | Fourth Level: Usually campus-defined values here and below. |
| `E`        | Fifth Level |
| `F`        | Sixth Level |
| `G`        | Seventh Level |

##### `ErpCostCenterType`

The type of cost center needed by Oracle to record a transaction.

| Enum Value | Description |
| ---------- | ----------- |
| `GL`       | General Ledger Segments: Transaction may be posted directly to the general ledger |
| `POET`     | POET Segments: Transaction belongs to a managed project and must be posted through the PPM sub-ledger. |

##### `ErpPeriodStatus`

Valid values for an accounting period status.

| Enum Value | Description |
| ---------- | ----------- |
| `C`        | Closed |
| `F`        | Future Enterable |
| `N`        | Never Opened |
| `O`        | Open |
| `P`        | Permanently Closed |

##### `InvoiceType`

Invoice category used in Payable Payment

| Enum Value   | Description |
| ------------ | ----------- |
| `CREDIT`     |  |
| `PREPAYMENT` |  |
| `STANDARD`   |  |

##### `PayeeType`

Used on payment API to indicate payment type

| Enum Value | Description |
| ---------- | ----------- |
| `EMPLOYEE` |  |
| `STUDENT`  |  |
| `SUPPLIER` |  |

##### `RequestStatus`

Status options within the [ActionRequestStatus]({{Types.ActionRequestStatus}}) that reflect the states a request can be in.

| Enum Value  | Description |
| ----------- | ----------- |
| `COMPLETE`  | If Callback URL Provided: Request has been processed, and the callback was successfully contacted.  Or, request has been processed, and no callback URL was provided. |
| `ERROR`     | There was an error processing the request after it was picked up. |
| `INPROCESS` | Request has been picked up for processing |
| `PENDING`   | Request has been submitted to the server, but not validated or processed. |
| `PROCESSED` | Request has been processed, but the callback has not been completed. |
| `REJECTED`  | There was a validation error in the request payload data. |
| `STALE`     | If Callback URL Provided: Request has been processed, but repeated attempts to contact the callback have failed and no more will be tried. |

##### `ScmInvoiceType`



| Enum Value   | Description |
| ------------ | ----------- |
| `CREDIT`     |  |
| `DEBIT`      |  |
| `PREPAYMENT` |  |
| `STANDARD`   |  |

##### `ScmLineType`



| Enum Value      | Description |
| --------------- | ----------- |
| `FREIGHT`       |  |
| `ITEM`          |  |
| `MISCELLANEOUS` |  |


![diagram](action-request-flow.svg)