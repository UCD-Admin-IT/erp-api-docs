<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1207px" preserveAspectRatio="none" style="width:1493px;height:1207px;background:#FFFFFF;" version="1.1" viewBox="0 0 1493 1207" width="1493px" zoomAndPan="magnify"><defs/><g><rect height="29.124" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="219" x="633.25" y="10"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="209" x="638.25" y="29">Procesing Inbound Data Request</text><rect fill="#FFE599" height="285.044" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="239.208"/><rect fill="#FFE599" height="82.98" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="1023.354"/><rect fill="#FFE599" height="55.32" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1244.5" y="707.826"/><rect fill="#FFE599" height="305.064" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1426.5" y="837.93"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="285" x2="285" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="510" x2="510" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="735.5" x2="735.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="886.5" x2="886.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1039.5" x2="1039.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1249.5" x2="1249.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1431.5" x2="1431.5" y1="79.248" y2="1151.994"/><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="101" x="15" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="22" y="66.124">Client System</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="101" x="15" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="22" y="1171.994">Client System</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="95" x="238" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="81" x="245" y="66.124">API Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="95" x="238" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="81" x="245" y="1171.994">API Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="435" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="442" y="66.124">GraphQL Data Server</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="435" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="442" y="1171.994">GraphQL Data Server</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="94" x="688.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="695.5" y="66.124">Int Database</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="94" x="688.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="695.5" y="1171.994">Int Database</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="106" x="833.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="840.5" y="66.124">Kafka Connect</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="106" x="833.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="840.5" y="1171.994">Kafka Connect</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="48" x="1015.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1022.5" y="66.124">Kafka</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="48" x="1015.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1022.5" y="1171.994">Kafka</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="1203.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1210.5" y="66.124">Apache NiFi</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="1203.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1210.5" y="1171.994">Apache NiFi</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="80" x="1391.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="1398.5" y="66.124">ERP Cloud</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="80" x="1391.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="1398.5" y="1171.994">ERP Cloud</text><rect fill="#FFE599" height="285.044" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="239.208"/><rect fill="#FFE599" height="82.98" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="1023.354"/><rect fill="#FFE599" height="55.32" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1244.5" y="707.826"/><rect fill="#FFE599" height="305.064" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1426.5" y="837.93"/><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1486.5" x="0" y="111.81"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="111.81" y2="111.81"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="114.81" y2="114.81"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="138" x="674.25" y="99.248"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="680.25" y="117.248">Request Queueing</text><polygon fill="#002851" points="273.5,152.032,283.5,156.032,273.5,160.032,277.5,156.032" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="65.5" x2="279.5" y1="156.032" y2="156.032"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="72.5" y="150.372">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="87" x="82.5" y="150.372">Makes WS Request</text><path d="M162,169.032 L162,214.032 L409,214.032 L409,179.032 L399,169.032 L162,169.032 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M399,169.032 L399,179.032 L409,179.032 L399,169.032 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="226" x="168" y="187.032">APIGateway will perform authentication</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="128" x="168" y="204.79">and initial authZ check</text><polygon fill="#002851" points="493.5,235.208,503.5,239.208,493.5,243.208,497.5,239.208" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="285.5" x2="499.5" y1="239.208" y2="239.208"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="292.5" y="233.548">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="98" x="302.5" y="233.548">Forwards WS Request</text><path d="M415,252.208 L415,297.208 L606,297.208 L606,262.208 L596,252.208 L415,252.208 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M596,252.208 L596,262.208 L606,262.208 L596,252.208 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="170" x="421" y="270.208">A request ID will be assigned</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="74" x="421" y="287.966">by the server</text><polygon fill="#002851" points="723.5,350.07,733.5,354.07,723.5,358.07,727.5,354.07" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="515.5" x2="729.5" y1="354.07" y2="354.07"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="522.5" y="348.41">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="134" x="532.5" y="348.41">Saves request ID and payload</text><path d="M740,307.724 L740,388.724 L1169,388.724 L1169,317.724 L1159,307.724 L740,307.724 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1159,307.724 L1159,317.724 L1169,317.724 L1159,307.724 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="293" x="746" y="325.724">All payloads received by the server will be logged,</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="389" x="746" y="343.482">both request and response, timing, status, and source information.</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="354" x="746" y="361.24">This will be used by the response polling, and could be used</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="408" x="746" y="378.998">for message replay, though that function should be built into any NiFi.</text><path d="M401,398.756 L401,443.756 L620,443.756 L620,408.756 L610,398.756 L401,398.756 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M610,398.756 L610,408.756 L620,408.756 L610,398.756 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="198" x="407" y="416.756">May perform more detailed AuthZ</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="146" x="407" y="434.514">checks before forwarding</text><polygon fill="#002851" points="746.5,464.932,736.5,468.932,746.5,472.932,742.5,468.932" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="740.5" x2="885.5" y1="468.932" y2="468.932"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="752.5" y="463.272">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="117" x="762.5" y="463.272">Monitors for new requests</text><polygon fill="#002851" points="1027.5,492.592,1037.5,496.592,1027.5,500.592,1031.5,496.592" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="886.5" x2="1033.5" y1="496.592" y2="496.592"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="893.5" y="490.932">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="119" x="903.5" y="490.932">Publishes request to Topic</text><polygon fill="#002851" points="296.5,520.252,286.5,524.252,296.5,528.252,292.5,524.252" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="290.5" x2="509.5" y1="524.252" y2="524.252"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="302.5" y="518.592">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="126" x="312.5" y="518.592">Returns tracking information</text><polygon fill="#002851" points="76.5,588.477,66.5,592.477,76.5,596.477,72.5,592.477" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="70.5" x2="284.5" y1="592.477" y2="592.477"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="82.5" y="586.817">7</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="126" x="92.5" y="586.817">Returns tracking information</text><path d="M290,537.252 L290,635.252 L709,635.252 L709,547.252 L699,537.252 L290,537.252 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M699,537.252 L699,547.252 L709,547.252 L699,537.252 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="379" x="296" y="555.252">The response to the client will contain the identifier of the request</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="398" x="296" y="573.01">as well as a URI which can be used to track the status of the request.</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="386" x="296" y="590.768">Additionally, a callback URI can be provided as part of the request</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="389" x="296" y="608.526">(or as part of the client configuration) to provide real-time feedback</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="220" x="296" y="626.284">after the request has been processed.</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1486.5" x="0" y="663.604"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="663.604" y2="663.604"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="666.604" y2="666.604"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="145" x="670.75" y="651.042"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127" x="676.75" y="669.042">Request Submission</text><polygon fill="#002851" points="1232.5,703.826,1242.5,707.826,1232.5,711.826,1236.5,707.826" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="1039.5" x2="1238.5" y1="707.826" y2="707.826"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1046.5" y="702.166">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="106" x="1056.5" y="702.166">Pulls from request topic</text><polygon fill="#002851" points="746.5,731.486,736.5,735.486,746.5,739.486,742.5,735.486" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="740.5" x2="1243.5" y1="735.486" y2="735.486"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="752.5" y="729.826">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="133" x="762.5" y="729.826">Markes request as in-progress</text><polygon fill="#002851" points="1419.5,759.146,1429.5,763.146,1419.5,767.146,1423.5,763.146" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="1249.5" x2="1425.5" y1="763.146" y2="763.146"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1256.5" y="757.486">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="143" x="1266.5" y="757.486">Formats and submits job to ERP</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1486.5" x="0" y="793.708"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="793.708" y2="793.708"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="796.708" y2="796.708"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="185" x="650.75" y="781.146"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="167" x="656.75" y="799.146">Request Result Monitoring</text><polygon fill="#002851" points="1414.5,833.93,1424.5,837.93,1414.5,841.93,1418.5,837.93" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="1249.5" x2="1420.5" y1="837.93" y2="837.93"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1256.5" y="832.27">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="83" x="1266.5" y="832.27">Polls for job results</text><polygon fill="#002851" points="1260.5,861.59,1250.5,865.59,1260.5,869.59,1256.5,865.59" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1254.5" x2="1425.5" y1="865.59" y2="865.59"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1266.5" y="859.93">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="65" x="1276.5" y="859.93">Returns results</text><polygon fill="#002851" points="746.5,889.25,736.5,893.25,746.5,897.25,742.5,893.25" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="740.5" x2="1248.5" y1="893.25" y2="893.25"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="752.5" y="887.59">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="153" x="762.5" y="887.59">Saves Response data with request</text><polygon fill="#002851" points="1050.5,916.91,1040.5,920.91,1050.5,924.91,1046.5,920.91" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="1044.5" x2="1248.5" y1="920.91" y2="920.91"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1056.5" y="915.25">7</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="176" x="1066.5" y="915.25">Publishes response into feedback topic</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1486.5" x="0" y="951.472"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="951.472" y2="951.472"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1486.5" y1="954.472" y2="954.472"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="207" x="639.75" y="938.91"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="189" x="645.75" y="956.91">Polling By Client for Response</text><polygon fill="#002851" points="273.5,991.694,283.5,995.694,273.5,999.694,277.5,995.694" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="65.5" x2="279.5" y1="995.694" y2="995.694"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="72.5" y="990.034">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="143" x="82.5" y="990.034">Polls provided URI from request</text><polygon fill="#002851" points="493.5,1019.354,503.5,1023.354,493.5,1027.354,497.5,1023.354" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="285.5" x2="499.5" y1="1023.354" y2="1023.354"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="292.5" y="1017.694">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="143" x="302.5" y="1017.694">Polls provided URI from request</text><polygon fill="#002851" points="723.5,1047.014,733.5,1051.014,723.5,1055.014,727.5,1051.014" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="515.5" x2="729.5" y1="1051.014" y2="1051.014"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="522.5" y="1045.354">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="154" x="532.5" y="1045.354">checks database for request status</text><polygon fill="#002851" points="526.5,1074.674,516.5,1078.674,526.5,1082.674,522.5,1078.674" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="520.5" x2="734.5" y1="1078.674" y2="1078.674"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="532.5" y="1073.014">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="542.5" y="1073.014">returns request and response information</text><polygon fill="#002851" points="296.5,1102.334,286.5,1106.334,296.5,1110.334,292.5,1106.334" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="290.5" x2="509.5" y1="1106.334" y2="1106.334"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="302.5" y="1100.674">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="312.5" y="1100.674">returns request and response information</text><polygon fill="#002851" points="76.5,1129.994,66.5,1133.994,76.5,1137.994,72.5,1133.994" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="70.5" x2="284.5" y1="1133.994" y2="1133.994"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="82.5" y="1128.334">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="92.5" y="1128.334">returns request and response information</text><rect height="13.66" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="160" x="662.75" y="1186.118"/><text fill="#888888" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="160" x="662.75" y="1196.118">Author: Jonathan Keller 11/2/2020</text><!--MD5=[7c866e658b5a2b29e99aa74b3b55aee8]
@startuml action-request-flow

!include ucd_style.iuml

title Procesing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020

participant "Client System" as CS
participant "API Gateway" AS APIGateway
participant "GraphQL Data Server" as IS
participant "Int Database" AS ISDB
participant "Kafka Connect" AS KC
participant Kafka
participant "Apache NiFi" AS NiFi
participant "ERP Cloud" AS ERP

== Request Queueing ==
autonumber 1
CS -> APIGateway : Makes WS Request
note over APIGateway: APIGateway will perform authentication\nand initial authZ check
APIGateway -> IS ++ : Forwards WS Request
note over IS: A request ID will be assigned\nby the server
IS -> ISDB : Saves request ID and payload
note right
    All payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into any NiFi.
endnote
note over IS: May perform more detailed AuthZ\nchecks before forwarding
KC -> ISDB : Monitors for new requests
KC -> Kafka : Publishes request to Topic
IS - -> APIGateway - - : Returns tracking information
APIGateway - -> CS : Returns tracking information
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
    Additionally, a callback URI can be provided as part of the request
    (or as part of the client configuration) to provide real-time feedback
    after the request has been processed.
endnote

== Request Submission ==

autonumber 1
Kafka -> NiFi ++ : Pulls from request topic
NiFi -> ISDB : Markes request as in-progress
NiFi -> ERP - - : Formats and submits job to ERP

== Request Result Monitoring ==

NiFi -> ERP ++ : Polls for job results
ERP - -> NiFi : Returns results
NiFi -> ISDB : Saves Response data with request
NiFi -> Kafka - - : Publishes response into feedback topic

' == Callback with Response (optional) ==

' autonumber 1
' NiFi -> Kafka : Pulls from response topic
' activate NiFi
' NiFi -> CS : Invokes HTTP Request with response data
' CS - -> NiFi : Confirms Receipt
' deactivate NiFi

== Polling By Client for Response ==

autonumber 1
CS -> APIGateway : Polls provided URI from request
APIGateway -> IS ++ : Polls provided URI from request
IS -> ISDB : checks database for request status
ISDB - -> IS : returns request and response information
IS - -> APIGateway - - : returns request and response information
APIGateway -> CS : returns request and response information

@enduml

@startuml action-request-flow
























skinparam DefaultFontName Avenir

skinparam activity {
    BackgroundColor #FFE599
    BorderColor #033266
    StartColor #266041
    FontColor black
    EndColor #79242F
}

skinparam actor {
    BackgroundColor #FFE599
    BorderColor #033266
    FontColor #002851
    FontStyle bold
}

skinparam arrow {
    Color #002851
    FontSize 10
    FontColor #4C4C4C
}

skinparam box {
    Padding 10
}

skinparam boundary {
    BorderColor black
    BackgroundColor #FFE599
    FontColor #002851
    FontStyle bold
}

skinparam cloud {
    BackgroundColor #6FCFEB
    BorderColor #003A5D
}

skinparam collections {
    BackgroundColor #FFE599
    BorderColor black
}

skinparam component {
    Style uml2
    FontColor #002851
    BackgroundColor #CDD6E0
    BorderColor #002851
}

skinparam control {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam database {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam entity {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam interface {
    BackgroundColor black
    BorderColor #FFBF00
}

skinparam note {
    BackgroundColor #CDD6E0
    BorderColor #1D4776
}

skinparam package {
    BackgroundColor #FFF2CC
}

skinparam participant {
    BackgroundColor #FFE599
    BorderColor black
    Padding 10
    FontColor #002851
    FontStyle bold
}

skinparam queue {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam sequence {
    DividerBorderColor #033266
    group {
      BackgroundColor #FFF9E5
      FontColor #002851
      BorderColor #1D4776
    }
    LifeLineBorderColor #1D4776
    LifeLineBackgroundColor #FFE599
    ArrowThickness 2
    box {
      FontColor #002851
      FontStyle bold
      FontSize 18
      BackgroundColor #FFF9E5
      BorderColor black
    }
    divider {
      FontColor black
      FontStyle bold
      FontSize 14
      BackgroundColor #CDD6E0
      BorderColor #002851
    }
}

skinparam swimlane {
    BorderColor #FFBF00
    TitleFontStyle bold
}

title Procesing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020

participant "Client System" as CS
participant "API Gateway" AS APIGateway
participant "GraphQL Data Server" as IS
participant "Int Database" AS ISDB
participant "Kafka Connect" AS KC
participant Kafka
participant "Apache NiFi" AS NiFi
participant "ERP Cloud" AS ERP

== Request Queueing ==
autonumber 1
CS -> APIGateway : Makes WS Request
note over APIGateway: APIGateway will perform authentication\nand initial authZ check
APIGateway -> IS ++ : Forwards WS Request
note over IS: A request ID will be assigned\nby the server
IS -> ISDB : Saves request ID and payload
note right
    All payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into any NiFi.
endnote
note over IS: May perform more detailed AuthZ\nchecks before forwarding
KC -> ISDB : Monitors for new requests
KC -> Kafka : Publishes request to Topic
IS - -> APIGateway - - : Returns tracking information
APIGateway - -> CS : Returns tracking information
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
    Additionally, a callback URI can be provided as part of the request
    (or as part of the client configuration) to provide real-time feedback
    after the request has been processed.
endnote

== Request Submission ==

autonumber 1
Kafka -> NiFi ++ : Pulls from request topic
NiFi -> ISDB : Markes request as in-progress
NiFi -> ERP - - : Formats and submits job to ERP

== Request Result Monitoring ==

NiFi -> ERP ++ : Polls for job results
ERP - -> NiFi : Returns results
NiFi -> ISDB : Saves Response data with request
NiFi -> Kafka - - : Publishes response into feedback topic



== Polling By Client for Response ==

autonumber 1
CS -> APIGateway : Polls provided URI from request
APIGateway -> IS ++ : Polls provided URI from request
IS -> ISDB : checks database for request status
ISDB - -> IS : returns request and response information
IS - -> APIGateway - - : returns request and response information
APIGateway -> CS : returns request and response information

@enduml

PlantUML version 1.2022.3(Tue Mar 29 09:10:57 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>