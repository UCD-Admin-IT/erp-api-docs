<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1207px" preserveAspectRatio="none" style="width:1309px;height:1207px;background:#FFFFFF;" version="1.1" viewBox="0 0 1309 1207" width="1309px" zoomAndPan="magnify"><defs/><g><rect height="29.124" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="219" x="541.25" y="10"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="209" x="546.25" y="29">Procesing Inbound Data Request</text><rect fill="#FFE599" height="257.384" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="239.208"/><rect fill="#FFE599" height="82.98" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="1023.354"/><rect fill="#FFE599" height="110.64" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1045.5" y="680.166"/><rect fill="#FFE599" height="55.32" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1045.5" y="865.59"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="285" x2="285" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="510" x2="510" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="735.5" x2="735.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="836.5" x2="836.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1050.5" x2="1050.5" y1="79.248" y2="1151.994"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1247.5" x2="1247.5" y1="79.248" y2="1151.994"/><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="101" x="15" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="22" y="66.124">Client System</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="101" x="15" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="22" y="1171.994">Client System</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="95" x="238" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="81" x="245" y="66.124">API Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="95" x="238" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="81" x="245" y="1171.994">API Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="435" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="442" y="66.124">GraphQL Data Server</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="435" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="442" y="1171.994">GraphQL Data Server</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="94" x="688.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="695.5" y="66.124">Int Database</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="94" x="688.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="695.5" y="1171.994">Int Database</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="48" x="812.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="819.5" y="66.124">Kafka</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="48" x="812.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="819.5" y="1171.994">Kafka</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="1004.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1011.5" y="66.124">Apache NiFi</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="1004.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1011.5" y="1171.994">Apache NiFi</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="80" x="1207.5" y="45.124"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="1214.5" y="66.124">ERP Cloud</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="80" x="1207.5" y="1150.994"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="1214.5" y="1171.994">ERP Cloud</text><rect fill="#FFE599" height="257.384" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="239.208"/><rect fill="#FFE599" height="82.98" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="505.5" y="1023.354"/><rect fill="#FFE599" height="110.64" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1045.5" y="680.166"/><rect fill="#FFE599" height="55.32" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="1045.5" y="865.59"/><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1302.5" x="0" y="111.81"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="111.81" y2="111.81"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="114.81" y2="114.81"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="138" x="582.25" y="99.248"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="588.25" y="117.248">Request Queueing</text><polygon fill="#002851" points="273.5,152.032,283.5,156.032,273.5,160.032,277.5,156.032" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="65.5" x2="279.5" y1="156.032" y2="156.032"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="72.5" y="150.372">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="87" x="82.5" y="150.372">Makes WS Request</text><path d="M162,169.032 L162,214.032 L409,214.032 L409,179.032 L399,169.032 L162,169.032 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M399,169.032 L399,179.032 L409,179.032 L399,169.032 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="226" x="168" y="187.032">APIGateway will perform authentication</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="128" x="168" y="204.79">and initial authZ check</text><polygon fill="#002851" points="493.5,235.208,503.5,239.208,493.5,243.208,497.5,239.208" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="285.5" x2="499.5" y1="239.208" y2="239.208"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="292.5" y="233.548">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="98" x="302.5" y="233.548">Forwards WS Request</text><path d="M415,252.208 L415,297.208 L606,297.208 L606,262.208 L596,252.208 L415,252.208 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M596,252.208 L596,262.208 L606,262.208 L596,252.208 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="170" x="421" y="270.208">A request ID will be assigned</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="74" x="421" y="287.966">by the server</text><polygon fill="#002851" points="723.5,350.07,733.5,354.07,723.5,358.07,727.5,354.07" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="515.5" x2="729.5" y1="354.07" y2="354.07"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="522.5" y="348.41">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="134" x="532.5" y="348.41">Saves request ID and payload</text><path d="M740,307.724 L740,388.724 L1169,388.724 L1169,317.724 L1159,307.724 L740,307.724 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1159,307.724 L1159,317.724 L1169,317.724 L1159,307.724 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="293" x="746" y="325.724">All payloads received by the server will be logged,</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="389" x="746" y="343.482">both request and response, timing, status, and source information.</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="354" x="746" y="361.24">This will be used by the response polling, and could be used</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="408" x="746" y="378.998">for message replay, though that function should be built into any ESB.</text><path d="M401,398.756 L401,443.756 L620,443.756 L620,408.756 L610,398.756 L401,398.756 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M610,398.756 L610,408.756 L620,408.756 L610,398.756 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="198" x="407" y="416.756">May perform more detailed AuthZ</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="146" x="407" y="434.514">checks before forwarding</text><polygon fill="#002851" points="824.5,464.932,834.5,468.932,824.5,472.932,828.5,468.932" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="515.5" x2="830.5" y1="468.932" y2="468.932"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="522.5" y="463.272">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="119" x="532.5" y="463.272">Publishes request to Topic</text><polygon fill="#002851" points="296.5,492.592,286.5,496.592,296.5,500.592,292.5,496.592" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="290.5" x2="509.5" y1="496.592" y2="496.592"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="302.5" y="490.932">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="113" x="312.5" y="490.932">Returns trace information</text><polygon fill="#002851" points="76.5,560.817,66.5,564.817,76.5,568.817,72.5,564.817" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="70.5" x2="284.5" y1="564.817" y2="564.817"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="82.5" y="559.157">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="113" x="92.5" y="559.157">Returns trace information</text><path d="M290,509.592 L290,607.592 L709,607.592 L709,519.592 L699,509.592 L290,509.592 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M699,509.592 L699,519.592 L709,519.592 L699,509.592 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="379" x="296" y="527.592">The response to the client will contain the identifier of the request</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="398" x="296" y="545.35">as well as a URI which can be used to track the status of the request.</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="386" x="296" y="563.108">Additionally, a callback URI can be provided as part of the request</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="389" x="296" y="580.866">(or as part of the client configuration) to provide real-time feedback</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="220" x="296" y="598.624">after the request has been processed.</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1302.5" x="0" y="635.944"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="635.944" y2="635.944"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="638.944" y2="638.944"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="142" x="580.25" y="623.382"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="124" x="586.25" y="641.382">Request Processing</text><polygon fill="#002851" points="1033.5,676.166,1043.5,680.166,1033.5,684.166,1037.5,680.166" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="836.5" x2="1039.5" y1="680.166" y2="680.166"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="843.5" y="674.506">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="106" x="853.5" y="674.506">Pulls from request topic</text><polygon fill="#002851" points="1235.5,703.826,1245.5,707.826,1235.5,711.826,1239.5,707.826" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="1055.5" x2="1241.5" y1="707.826" y2="707.826"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1062.5" y="702.166">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="158" x="1072.5" y="702.166">Formats and makes request to ERP</text><polygon fill="#002851" points="1066.5,731.486,1056.5,735.486,1066.5,739.486,1062.5,735.486" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1060.5" x2="1246.5" y1="735.486" y2="735.486"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="1072.5" y="729.826">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="93" x="1082.5" y="729.826">Responds to request</text><polygon fill="#002851" points="746.5,759.146,736.5,763.146,746.5,767.146,742.5,763.146" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="740.5" x2="1044.5" y1="763.146" y2="763.146"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="752.5" y="757.486">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="153" x="762.5" y="757.486">Saves Response data with request</text><polygon fill="#002851" points="847.5,786.806,837.5,790.806,847.5,794.806,843.5,790.806" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="841.5" x2="1049.5" y1="790.806" y2="790.806"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="853.5" y="785.146">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="175" x="863.5" y="785.146">Publishes response into response topic</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1302.5" x="0" y="821.368"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="821.368" y2="821.368"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="824.368" y2="824.368"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="229" x="536.75" y="808.806"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="211" x="542.75" y="826.806">Callback with Response (optional)</text><polygon fill="#002851" points="847.5,861.59,837.5,865.59,847.5,869.59,843.5,865.59" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="841.5" x2="1044.5" y1="865.59" y2="865.59"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="853.5" y="859.93">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="113" x="863.5" y="859.93">Pulls from response topic</text><polygon fill="#002851" points="76.5,889.25,66.5,893.25,76.5,897.25,72.5,893.25" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="70.5" x2="1044.5" y1="893.25" y2="893.25"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="82.5" y="887.59">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="190" x="92.5" y="887.59">Invokes HTTP Request with response data</text><polygon fill="#002851" points="1038.5,916.91,1048.5,920.91,1038.5,924.91,1042.5,920.91" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="65.5" x2="1044.5" y1="920.91" y2="920.91"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="72.5" y="915.25">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="77" x="82.5" y="915.25">Confirms Receipt</text><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1302.5" x="0" y="951.472"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="951.472" y2="951.472"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1302.5" y1="954.472" y2="954.472"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="207" x="547.75" y="938.91"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="189" x="553.75" y="956.91">Polling By Client for Response</text><polygon fill="#002851" points="273.5,991.694,283.5,995.694,273.5,999.694,277.5,995.694" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="65.5" x2="279.5" y1="995.694" y2="995.694"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="72.5" y="990.034">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="143" x="82.5" y="990.034">Polls provided URI from request</text><polygon fill="#002851" points="493.5,1019.354,503.5,1023.354,493.5,1027.354,497.5,1023.354" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="285.5" x2="499.5" y1="1023.354" y2="1023.354"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="292.5" y="1017.694">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="143" x="302.5" y="1017.694">Polls provided URI from request</text><polygon fill="#002851" points="723.5,1047.014,733.5,1051.014,723.5,1055.014,727.5,1051.014" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="515.5" x2="729.5" y1="1051.014" y2="1051.014"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="522.5" y="1045.354">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="154" x="532.5" y="1045.354">checks database for request status</text><polygon fill="#002851" points="526.5,1074.674,516.5,1078.674,526.5,1082.674,522.5,1078.674" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="520.5" x2="734.5" y1="1078.674" y2="1078.674"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="532.5" y="1073.014">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="542.5" y="1073.014">returns request and response information</text><polygon fill="#002851" points="296.5,1102.334,286.5,1106.334,296.5,1110.334,292.5,1106.334" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="290.5" x2="509.5" y1="1106.334" y2="1106.334"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="302.5" y="1100.674">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="312.5" y="1100.674">returns request and response information</text><polygon fill="#002851" points="76.5,1129.994,66.5,1133.994,76.5,1137.994,72.5,1133.994" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="70.5" x2="284.5" y1="1133.994" y2="1133.994"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="82.5" y="1128.334">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="186" x="92.5" y="1128.334">returns request and response information</text><rect height="13.66" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="160" x="570.75" y="1186.118"/><text fill="#888888" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="160" x="570.75" y="1196.118">Author: Jonathan Keller 11/2/2020</text><!--MD5=[d129fdb80ed3e6d5f315f916d69113bc]
@startuml action-request-flow

!include ucd_style.iuml

title Procesing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020

participant "Client System" as CS
participant "API Gateway" AS APIGateway
participant "GraphQL Data Server" as IS
participant "Int Database" AS ISDB
participant Kafka
participant "Apache NiFi" AS ESB
participant "ERP Cloud" AS ERP

== Request Queueing ==
autonumber 1
CS -> APIGateway : Makes WS Request
note over APIGateway: APIGateway will perform authentication\nand initial authZ check
APIGateway -> IS ++ : Forwards WS Request
note over IS: A request ID will be assigned\nby the server
IS -> ISDB : Saves request ID and payload
note right
    All payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into any ESB.
endnote
note over IS: May perform more detailed AuthZ\nchecks before forwarding
IS -> Kafka : Publishes request to Topic
IS - -> APIGateway - - : Returns trace information
APIGateway - -> CS : Returns trace information
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
    Additionally, a callback URI can be provided as part of the request
    (or as part of the client configuration) to provide real-time feedback
    after the request has been processed.
endnote

== Request Processing ==

autonumber 1
Kafka -> ESB ++ : Pulls from request topic
ESB -> ERP : Formats and makes request to ERP
ERP - -> ESB : Responds to request
ESB -> ISDB : Saves Response data with request
ESB -> Kafka - - : Publishes response into response topic

== Callback with Response (optional) ==

autonumber 1
ESB -> Kafka : Pulls from response topic
activate ESB
ESB -> CS : Invokes HTTP Request with response data
CS - -> ESB : Confirms Receipt
deactivate ESB

== Polling By Client for Response ==

autonumber 1
CS -> APIGateway : Polls provided URI from request
APIGateway -> IS ++ : Polls provided URI from request
IS -> ISDB : checks database for request status
ISDB - -> IS : returns request and response information
IS - -> APIGateway - - : returns request and response information
APIGateway -> CS : returns request and response information

@enduml

@startuml action-request-flow
























skinparam DefaultFontName Avenir

skinparam activity {
    BackgroundColor #FFE599
    BorderColor #033266
    StartColor #266041
    FontColor black
    EndColor #79242F
}

skinparam actor {
    BackgroundColor #FFE599
    BorderColor #033266
    FontColor #002851
    FontStyle bold
}

skinparam arrow {
    Color #002851
    FontSize 10
    FontColor #4C4C4C
}

skinparam box {
    Padding 10
}

skinparam boundary {
    BorderColor black
    BackgroundColor #FFE599
    FontColor #002851
    FontStyle bold
}

skinparam cloud {
    BackgroundColor #6FCFEB
    BorderColor #003A5D
}

skinparam collections {
    BackgroundColor #FFE599
    BorderColor black
}

skinparam component {
    Style uml2
    FontColor #002851
    BackgroundColor #CDD6E0
    BorderColor #002851
}

skinparam control {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam database {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam entity {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam interface {
    BackgroundColor black
    BorderColor #FFBF00
}

skinparam note {
    BackgroundColor #CDD6E0
    BorderColor #1D4776
}

skinparam package {
    BackgroundColor #FFF2CC
}

skinparam participant {
    BackgroundColor #FFE599
    BorderColor black
    Padding 10
    FontColor #002851
    FontStyle bold
}

skinparam queue {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam sequence {
    DividerBorderColor #033266
    group {
      BackgroundColor #FFF9E5
      FontColor #002851
      BorderColor #1D4776
    }
    LifeLineBorderColor #1D4776
    LifeLineBackgroundColor #FFE599
    ArrowThickness 2
    box {
      FontColor #002851
      FontStyle bold
      FontSize 18
      BackgroundColor #FFF9E5
      BorderColor black
    }
    divider {
      FontColor black
      FontStyle bold
      FontSize 14
      BackgroundColor #CDD6E0
      BorderColor #002851
    }
}

skinparam swimlane {
    BorderColor #FFBF00
    TitleFontStyle bold
}

title Procesing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020

participant "Client System" as CS
participant "API Gateway" AS APIGateway
participant "GraphQL Data Server" as IS
participant "Int Database" AS ISDB
participant Kafka
participant "Apache NiFi" AS ESB
participant "ERP Cloud" AS ERP

== Request Queueing ==
autonumber 1
CS -> APIGateway : Makes WS Request
note over APIGateway: APIGateway will perform authentication\nand initial authZ check
APIGateway -> IS ++ : Forwards WS Request
note over IS: A request ID will be assigned\nby the server
IS -> ISDB : Saves request ID and payload
note right
    All payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into any ESB.
endnote
note over IS: May perform more detailed AuthZ\nchecks before forwarding
IS -> Kafka : Publishes request to Topic
IS - -> APIGateway - - : Returns trace information
APIGateway - -> CS : Returns trace information
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
    Additionally, a callback URI can be provided as part of the request
    (or as part of the client configuration) to provide real-time feedback
    after the request has been processed.
endnote

== Request Processing ==

autonumber 1
Kafka -> ESB ++ : Pulls from request topic
ESB -> ERP : Formats and makes request to ERP
ERP - -> ESB : Responds to request
ESB -> ISDB : Saves Response data with request
ESB -> Kafka - - : Publishes response into response topic

== Callback with Response (optional) ==

autonumber 1
ESB -> Kafka : Pulls from response topic
activate ESB
ESB -> CS : Invokes HTTP Request with response data
CS - -> ESB : Confirms Receipt
deactivate ESB

== Polling By Client for Response ==

autonumber 1
CS -> APIGateway : Polls provided URI from request
APIGateway -> IS ++ : Polls provided URI from request
IS -> ISDB : checks database for request status
ISDB - -> IS : returns request and response information
IS - -> APIGateway - - : returns request and response information
APIGateway -> CS : returns request and response information

@enduml

PlantUML version 1.2022.3(Tue Mar 29 09:10:57 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>