<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="870px" preserveAspectRatio="none" style="width:1232px;height:870px;background:#FFFFFF;" version="1.1" viewBox="0 0 1232 870" width="1232px" zoomAndPan="magnify"><defs/><g><rect height="29.124" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="225" x="499.75" y="10"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="215" x="504.75" y="29">Processing Inbound Data Request</text><rect fill="#FFF9E5" height="801.924" style="stroke:#000000;stroke-width:0.5;" width="611" x="114" y="46.124"/><text fill="#000000" font-family="Avenir" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150" x="344.5" y="59.124">Web Service Components</text><rect fill="#CDD6E0" height="801.924" style="stroke:#000000;stroke-width:0.5;" width="293" x="747" y="46.124"/><text fill="#000000" font-family="Avenir" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="190" x="796.5" y="59.124">Integration Pipeline Components</text><rect fill="#FFE599" height="510.546" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="179" y="223.45"/><rect fill="#FFE599" height="385.782" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="350" y="306.626"/><rect fill="#FFE599" height="201.868" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="630.5" y="462.88"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="51" x2="51" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="184" x2="184" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="355" x2="355" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="496" x2="496" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="635" x2="635" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="800" x2="800" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="916" x2="916" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1009" x2="1009" y1="133.006" y2="765.924"/><line style="stroke:#1D4776;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1094" x2="1094" y1="133.006" y2="765.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="5" y="127.882">Client System</text><ellipse cx="51.5" cy="62.382" fill="#FFE599" rx="8" ry="8" style="stroke:#033266;stroke-width:0.5;"/><path d="M51.5,70.382 L51.5,97.382 M38.5,78.382 L64.5,78.382 M51.5,97.382 L38.5,112.382 M51.5,97.382 L64.5,112.382 " fill="none" style="stroke:#033266;stroke-width:0.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="5" y="778.924">Client System</text><ellipse cx="51.5" cy="792.548" fill="#FFE599" rx="8" ry="8" style="stroke:#033266;stroke-width:0.5;"/><path d="M51.5,800.548 L51.5,827.548 M38.5,808.548 L64.5,808.548 M51.5,827.548 L38.5,842.548 M51.5,827.548 L64.5,842.548 " fill="none" style="stroke:#033266;stroke-width:0.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="118" y="127.882">WSO2 API Gateway</text><path d="M163.5,85.882 L163.5,109.882 M163.5,97.882 L180.5,97.882 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><ellipse cx="192.5" cy="97.882" fill="#FFE599" rx="12" ry="12" style="stroke:#000000;stroke-width:0.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="118" y="778.924">WSO2 API Gateway</text><path d="M163.5,788.048 L163.5,812.048 M163.5,800.048 L180.5,800.048 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><ellipse cx="192.5" cy="800.048" fill="#FFE599" rx="12" ry="12" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="132" x="289" y="98.882"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="118" x="296" y="119.882">GraphQL Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="132" x="289" y="764.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="118" x="296" y="785.924">GraphQL Gateway</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="68" x="462" y="98.882"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="469" y="119.882">Grouper</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="68" x="462" y="764.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="469" y="785.924">Grouper</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="560" y="98.882"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="567" y="119.882">GraphQL Data Server</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="151" x="560" y="764.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137" x="567" y="785.924">GraphQL Data Server</text><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93" x="751" y="127.882">Integration DB</text><path d="M782.5,77.882 C782.5,67.882 800.5,67.882 800.5,67.882 C800.5,67.882 818.5,67.882 818.5,77.882 L818.5,103.882 C818.5,113.882 800.5,113.882 800.5,113.882 C800.5,113.882 782.5,113.882 782.5,103.882 L782.5,77.882 " fill="#FFE599" style="stroke:#000000;stroke-width:1.5;"/><path d="M782.5,77.882 C782.5,87.882 800.5,87.882 800.5,87.882 C800.5,87.882 818.5,87.882 818.5,77.882 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93" x="751" y="778.924">Integration DB</text><path d="M782.5,794.048 C782.5,784.048 800.5,784.048 800.5,784.048 C800.5,784.048 818.5,784.048 818.5,794.048 L818.5,820.048 C818.5,830.048 800.5,830.048 800.5,830.048 C800.5,830.048 782.5,830.048 782.5,820.048 L782.5,794.048 " fill="#FFE599" style="stroke:#000000;stroke-width:1.5;"/><path d="M782.5,794.048 C782.5,804.048 800.5,804.048 800.5,804.048 C800.5,804.048 818.5,804.048 818.5,794.048 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="870" y="98.882"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="877" y="119.882">Apache NiFi</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92" x="870" y="764.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="877" y="785.924">Apache NiFi</text><path d="M987,103.882 L1031,103.882 C1036,103.882 1036,118.444 1036,118.444 C1036,118.444 1036,133.006 1031,133.006 L987,133.006 C982,133.006 982,118.444 982,118.444 C982,118.444 982,103.882 987,103.882 " fill="#FFE599" style="stroke:#000000;stroke-width:0.5;"/><path d="M1031,103.882 C1026,103.882 1026,118.444 1026,118.444 C1026,133.006 1031,133.006 1031,133.006 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="987" y="122.882">Kafka</text><path d="M987,764.924 L1031,764.924 C1036,764.924 1036,779.486 1036,779.486 C1036,779.486 1036,794.048 1031,794.048 L987,794.048 C982,794.048 982,779.486 982,779.486 C982,779.486 982,764.924 987,764.924 " fill="#FFE599" style="stroke:#000000;stroke-width:0.5;"/><path d="M1031,764.924 C1026,764.924 1026,779.486 1026,779.486 C1026,794.048 1031,794.048 1031,794.048 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="987" y="783.924">Kafka</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="56" x="1066" y="98.882"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1073" y="119.882">Oracle</text><rect fill="#FFE599" height="33.124" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="56" x="1066" y="764.924"/><text fill="#002851" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1073" y="785.924">Oracle</text><rect fill="#FFE599" height="510.546" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="179" y="223.45"/><rect fill="#FFE599" height="385.782" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="350" y="306.626"/><rect fill="#FFE599" height="201.868" style="stroke:#1D4776;stroke-width:1.0;" width="10" x="630.5" y="462.88"/><rect fill="#CDD6E0" height="3" style="stroke:#CDD6E0;stroke-width:1.0;" width="1225.5" x="0" y="165.568"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1225.5" y1="165.568" y2="165.568"/><line style="stroke:#002851;stroke-width:1.0;" x1="0" x2="1225.5" y1="168.568" y2="168.568"/><rect fill="#CDD6E0" height="27.124" style="stroke:#002851;stroke-width:2.0;" width="138" x="543.75" y="153.006"/><text fill="#000000" font-family="Avenir" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="549.75" y="171.006">Request Queueing</text><polygon fill="#002851" points="167,219.45,177,223.45,167,227.45,171,223.45" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="51.5" x2="173" y1="223.45" y2="223.45"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="58.5" y="210.96">1</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="80" x="68.5" y="204.13">Submits GraphQL</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="88" x="68.5" y="217.79">Mutation Operation</text><path d="M76,236.45 L76,281.45 L291,281.45 L291,246.45 L281,236.45 L76,236.45 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M281,236.45 L281,246.45 L291,246.45 L281,236.45 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="194" x="82" y="254.45">WSO2 will perform authentication</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="128" x="82" y="272.208">and initial authZ check</text><polygon fill="#002851" points="338,302.626,348,306.626,338,310.626,342,306.626" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="189" x2="344" y1="306.626" y2="306.626"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="196" y="300.966">2</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="132" x="206" y="300.966">Forwards GraphQL Operation</text><path d="M209,319.626 L209,382.626 L500,382.626 L500,329.626 L490,319.626 L209,319.626 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M490,319.626 L490,329.626 L500,329.626 L490,319.626 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="270" x="215" y="337.626">GraphQL Gateway obtains roles from Grouper</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="233" x="219" y="355.384">and attaches to request for enforcement</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="165" x="219" y="373.142">by the GraphQL Data Server</text><polygon fill="#002851" points="484,403.56,494,407.56,484,411.56,488,407.56" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="360" x2="490" y1="407.56" y2="407.56"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="367" y="401.9">3</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="102" x="377" y="401.9">Requests roles for user</text><polygon fill="#002851" points="371,431.22,361,435.22,371,439.22,367,435.22" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="365" x2="495" y1="435.22" y2="435.22"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="377" y="429.56">4</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="95" x="387" y="429.56">Returns roles for user</text><polygon fill="#002851" points="618.5,458.88,628.5,462.88,618.5,466.88,622.5,462.88" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="360" x2="624.5" y1="462.88" y2="462.88"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="367" y="457.22">5</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="132" x="377" y="457.22">Forwards GraphQL Operation</text><path d="M547,475.88 L547,520.88 L723,520.88 L723,485.88 L713,475.88 L547,475.88 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M713,475.88 L713,485.88 L723,485.88 L713,475.88 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="155" x="553" y="493.88">A request ID (UUID) will be</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="130" x="557" y="511.638">assigned by the server</text><polygon fill="#002851" points="651.5,542.056,641.5,546.056,651.5,550.056,647.5,546.056" style="stroke:#002851;stroke-width:1.0;"/><polygon fill="#002851" points="788.5,542.056,798.5,546.056,788.5,550.056,792.5,546.056" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="645.5" x2="794.5" y1="546.056" y2="546.056"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="657.5" y="540.396">6</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="114" x="667.5" y="540.396">Validates request payload</text><polygon fill="#002851" points="788.5,601.402,798.5,605.402,788.5,609.402,792.5,605.402" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;" x1="640.5" x2="794.5" y1="605.402" y2="605.402"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="647.5" y="599.742">7</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="64" x="657.5" y="599.742">Saves payload</text><path d="M805,559.056 L805,640.056 L1215,640.056 L1215,569.056 L1205,559.056 L805,559.056 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1205,559.056 L1205,569.056 L1215,569.056 L1205,559.056 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="371" x="811" y="577.056">All valid request payloads received by the server will be logged,</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="389" x="811" y="594.814">both request and response, timing, status, and source information.</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="354" x="811" y="612.572">This will be used by the response polling, and could be used</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="384" x="811" y="630.33">for message replay, though that function should be built into NiFi.</text><polygon fill="#002851" points="371,660.748,361,664.748,371,668.748,367,664.748" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="365" x2="634.5" y1="664.748" y2="664.748"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="377" y="659.088">8</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="145" x="387" y="659.088">Generates and returns response</text><polygon fill="#002851" points="200,688.408,190,692.408,200,696.408,196,692.408" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="194" x2="354" y1="692.408" y2="692.408"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="6" x="206" y="686.748">9</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="84" x="216" y="686.748">Forwards response</text><polygon fill="#002851" points="62.5,729.996,52.5,733.996,62.5,737.996,58.5,733.996" style="stroke:#002851;stroke-width:1.0;"/><line style="stroke:#002851;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="56.5" x2="183" y1="733.996" y2="733.996"/><text fill="#4C4C4C" font-family="Avenir" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="12" x="68.5" y="728.336">10</text><text fill="#4C4C4C" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="84" x="84.5" y="728.336">Forwards response</text><path d="M194,705.408 L194,750.408 L613,750.408 L613,715.408 L603,705.408 L194,705.408 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><path d="M603,705.408 L603,715.408 L613,715.408 L603,705.408 " fill="#CDD6E0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="379" x="200" y="723.408">The response to the client will contain the identifier of the request</text><text fill="#000000" font-family="Avenir" font-size="13" lengthAdjust="spacing" textLength="398" x="200" y="741.166">as well as a URI which can be used to track the status of the request.</text><rect height="13.66" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="260" x="482.25" y="849.048"/><text fill="#888888" font-family="Avenir" font-size="10" lengthAdjust="spacing" textLength="260" x="482.25" y="859.048">Author: Jonathan Keller 11/2/2020 - Revised: 8/28/2023</text><!--MD5=[62fabf81bd8e107840aec8e5df2b0a00]
@startuml action-request-flow

!include ucd_style.iuml

title Processing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020 - Revised: 8/28/2023

actor "Client System" as CS
box Web Service Components
  boundary "WSO2 API Gateway" AS WSO2
  participant "GraphQL Gateway" AS GQLGateway
  participant Grouper
  participant "GraphQL Data Server" as GQL
end box
box Integration Pipeline Components #CDD6E0
  database "Integration DB" AS Postgres
  participant "Apache NiFi" AS NiFi
  queue Kafka
end box
participant "Oracle" AS ERP

== Request Queueing ==

autonumber 1
CS -> WSO2 ++ : Submits GraphQL\nMutation Operation
note over WSO2: WSO2 will perform authentication\nand initial authZ check
WSO2 -> GQLGateway ++ : Forwards GraphQL Operation
note over GQLGateway: GraphQL Gateway obtains roles from Grouper\n and attaches to request for enforcement\n by the GraphQL Data Server
GQLGateway -> Grouper : Requests roles for user
Grouper - -> GQLGateway : Returns roles for user
GQLGateway -> GQL ++ : Forwards GraphQL Operation
note over GQL: A request ID (UUID) will be\n assigned by the server
GQL <-> Postgres : Validates request payload
GQL -> Postgres : Saves payload
note right
    All valid request payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into NiFi.
endnote
GQL - -> GQLGateway - - : Generates and returns response
GQLGateway - -> WSO2 - - : Forwards response
WSO2 - -> CS - - : Forwards response
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
endnote

@enduml

@startuml action-request-flow
























skinparam DefaultFontName Avenir

skinparam activity {
    BackgroundColor #FFE599
    BorderColor #033266
    StartColor #266041
    FontColor black
    EndColor #79242F
}

skinparam actor {
    BackgroundColor #FFE599
    BorderColor #033266
    FontColor #002851
    FontStyle bold
}

skinparam arrow {
    Color #002851
    FontSize 10
    FontColor #4C4C4C
}

skinparam box {
    Padding 10
}

skinparam boundary {
    BorderColor black
    BackgroundColor #FFE599
    FontColor #002851
    FontStyle bold
}

skinparam cloud {
    BackgroundColor #6FCFEB
    BorderColor #003A5D
}

skinparam collections {
    BackgroundColor #FFE599
    BorderColor black
}

skinparam component {
    Style uml2
    FontColor #002851
    BackgroundColor #CDD6E0
    BorderColor #002851
}

skinparam control {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam database {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam entity {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam interface {
    BackgroundColor black
    BorderColor #FFBF00
}

skinparam note {
    BackgroundColor #CDD6E0
    BorderColor #1D4776
}

skinparam package {
    BackgroundColor #FFF2CC
}

skinparam participant {
    BackgroundColor #FFE599
    BorderColor black
    Padding 10
    FontColor #002851
    FontStyle bold
}

skinparam queue {
    BackgroundColor #FFE599
    BorderColor black
    FontColor #002851
    FontStyle bold
}

skinparam sequence {
    DividerBorderColor #033266
    group {
      BackgroundColor #FFF9E5
      FontColor #002851
      BorderColor #1D4776
    }
    LifeLineBorderColor #1D4776
    LifeLineBackgroundColor #FFE599
    ArrowThickness 2
    box {
      FontColor #002851
      FontStyle bold
      FontSize 18
      BackgroundColor #FFF9E5
      BorderColor black
    }
    divider {
      FontColor black
      FontStyle bold
      FontSize 14
      BackgroundColor #CDD6E0
      BorderColor #002851
    }
}

skinparam swimlane {
    BorderColor #FFBF00
    TitleFontStyle bold
}

title Processing Inbound Data Request
center footer Author: Jonathan Keller 11/2/2020 - Revised: 8/28/2023

actor "Client System" as CS
box Web Service Components
  boundary "WSO2 API Gateway" AS WSO2
  participant "GraphQL Gateway" AS GQLGateway
  participant Grouper
  participant "GraphQL Data Server" as GQL
end box
box Integration Pipeline Components #CDD6E0
  database "Integration DB" AS Postgres
  participant "Apache NiFi" AS NiFi
  queue Kafka
end box
participant "Oracle" AS ERP

== Request Queueing ==

autonumber 1
CS -> WSO2 ++ : Submits GraphQL\nMutation Operation
note over WSO2: WSO2 will perform authentication\nand initial authZ check
WSO2 -> GQLGateway ++ : Forwards GraphQL Operation
note over GQLGateway: GraphQL Gateway obtains roles from Grouper\n and attaches to request for enforcement\n by the GraphQL Data Server
GQLGateway -> Grouper : Requests roles for user
Grouper - -> GQLGateway : Returns roles for user
GQLGateway -> GQL ++ : Forwards GraphQL Operation
note over GQL: A request ID (UUID) will be\n assigned by the server
GQL <-> Postgres : Validates request payload
GQL -> Postgres : Saves payload
note right
    All valid request payloads received by the server will be logged,
    both request and response, timing, status, and source information.
    This will be used by the response polling, and could be used
    for message replay, though that function should be built into NiFi.
endnote
GQL - -> GQLGateway - - : Generates and returns response
GQLGateway - -> WSO2 - - : Forwards response
WSO2 - -> CS - - : Forwards response
deactivate CS
note right
    The response to the client will contain the identifier of the request
    as well as a URI which can be used to track the status of the request.
endnote

@enduml

PlantUML version 1.2022.3(Tue Mar 29 09:10:57 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>